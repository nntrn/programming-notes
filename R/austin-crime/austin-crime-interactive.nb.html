<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />


<meta name="author" content="@nntrn" />


<title>austin crime interactive</title>


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
#rmd-source-code {
  display: none;
}
</style>


</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
</style>

<style type="text/css">
.kable-table {
  border: 1px solid #ccc;
  border-radius: 4px;
  overflow: auto;
  padding-left: 8px;
  padding-right: 8px;
  margin-bottom: 20px;
  max-height: 350px;
}

.kable-table table {
  margin-bottom: 0px;
}

.kable-table table>thead>tr>th {
  border: none;
  border-bottom: 2px solid #dddddd;
}

.kable-table table>thead {
  background-color: #fff;
}
</style>


<div class="container-fluid main-container">

<!-- tabsets -->
<script>
$(document).ready(function () {
  window.buildTabsets("section-TOC");
});
</script>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>
<script>
$(document).ready(function () {
  window.initializeSourceEmbed("austin-crime-interactive.Rmd");
  window.initializeCodeFolding("hide" === "show");
});
</script>






<div class="fluid-row" id="section-header">

<div class="btn-group pull-right">
<button type="button" class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
<li role="separator" class="divider"></li>
<li><a id="rmd-download-source" href="#">Download Rmd</a></li>
</ul>
</div>



<h1 class="title toc-ignore">austin crime interactive</h1>
<h4 class="author"><em><span class="citation">@nntrn</span></em></h4>
<h4 class="date"><em>11/6/2018</em></h4>

</div>


<!-- rnb-text-begin -->
<!-- rnb-text-end -->
<!-- rnb-text-begin -->
<!-- rnb-text-end -->
<!-- rnb-chunk-begin -->
<p><div class="form-group shiny-input-container">
<label class="control-label" for="zipcode">select zip</label>
<div>
<select id="zipcode" multiple="multiple"><option value="78701">78701</option>
<option value="78741">78741</option>
<option value="78753">78753</option>
<option value="78758">78758</option>
<option value="78704">78704</option>
<option value="78745">78745</option>
<option value="78744">78744</option>
<option value="78723">78723</option>
<option value="78702">78702</option>
<option value="78752">78752</option>
<option value="78748">78748</option>
<option value="78759">78759</option>
<option value="78751">78751</option>
<option value="78705">78705</option>
<option value="78757" selected>78757</option>
<option value="78721">78721</option>
<option value="78724">78724</option>
<option value="78749">78749</option>
<option value="78727">78727</option>
<option value="78729">78729</option>
<option value="78703">78703</option>
<option value="78750">78750</option>
<option value="78746">78746</option>
<option value="78754">78754</option>
<option value="78731">78731</option>
<option value="78617">78617</option>
<option value="78719">78719</option>
<option value="78717">78717</option>
<option value="78756">78756</option>
<option value="78722">78722</option>
<option value="78735">78735</option>
<option value="78747">78747</option>
<option value="78726">78726</option>
<option value="78613">78613</option>
<option value="78660">78660</option>
<option value="78739">78739</option>
<option value="78736">78736</option>
<option value="78725">78725</option>
<option value="78742">78742</option>
<option value="78730">78730</option>
<option value="78653">78653</option>
<option value="78728">78728</option>
<option value="78652">78652</option>
<option value="78712">78712</option>
<option value="78681">78681</option>
<option value="78732">78732</option>
<option value="78733">78733</option>
<option value="78737">78737</option>
<option value="78610">78610</option>
<option value="78734">78734</option>
<option value="78738">78738</option>
<option value="78664">78664</option>
<option value="78641">78641</option></select>
<script type="application/json" data-for="zipcode">{}</script>
</div>
</div><div id="category" class="form-group shiny-input-radiogroup shiny-input-container shiny-input-container-inline">
<label class="control-label" for="category">select offense category</label>
<div class="shiny-options-group">
<label class="radio-inline">
<input type="radio" name="category" value="Theft" checked="checked"/>
<span>Theft</span>
</label>
<label class="radio-inline">
<input type="radio" name="category" value="Aggravated Assault"/>
<span>Aggravated Assault</span>
</label>
<label class="radio-inline">
<input type="radio" name="category" value="Robbery"/>
<span>Robbery</span>
</label>
<label class="radio-inline">
<input type="radio" name="category" value="Auto Theft"/>
<span>Auto Theft</span>
</label>
<label class="radio-inline">
<input type="radio" name="category" value="Rape"/>
<span>Rape</span>
</label>
<label class="radio-inline">
<input type="radio" name="category" value="Burglary"/>
<span>Burglary</span>
</label>
<label class="radio-inline">
<input type="radio" name="category" value="Murder"/>
<span>Murder</span>
</label>
</div>
</div><div id="distPlot" class="shiny-plot-output" style="width: 100% ; height: 400px"></div></p>
<!-- rnb-chunk-end -->
<!-- rnb-text-begin -->
<!-- rnb-text-end -->
<!-- rnb-chunk-begin -->
<!-- rnb-chunk-end -->
<!-- rnb-text-begin -->
<!-- rnb-text-end -->

<script type="application/shiny-prerendered" data-context="server-start">

knitr::opts_chunk$set(echo = TRUE)

library(tidyverse)

my_theme <- theme_minimal() +
  theme(
    axis.text.x = element_text(colour = "grey20", size = 13, face = "bold"),
    axis.text.y = element_text(colour = "grey20", size = 13, face = "bold"),
   legend.position="bottom", legend.box = "horizontal"
  )

theme_set(my_theme)


p <- read_csv("/Users/annie/programming-notes/R/austin-crime/output/p.csv")
p$month <- ordered(p$month, toupper(month.abb))

p2 <- p %>%
    filter(street_name != "UNKNOWN") %>%
    group_by(highest_offense_description, street_name) %>%
    summarise(n = n(), s = sum(value)) %>%
    arrange(desc(n))


p_list <- p2 %>%
    group_by(highest_offense_description) %>%
    summarise(n = n()) %>%
    arrange(desc(n)) 

zip <- p%>%
    group_by(zip_code) %>%
    summarise(n = n()) %>%
    na.omit() %>%
    arrange(desc(n))
</script>
 
<script type="application/shiny-prerendered" data-context="server">

output$distPlot <- renderPlot({
  zip_string <- gsub(", ", " AND ", toString(input$zipcode))

  g1 <- p %>%
    filter(
      zip_code == input$zipcode,
      category_description == input$category
    ) %>%
    group_by(zip_code, month) %>%
    summarise(n = n(), s = sum(value)) %>%
    ggplot(aes(month, s, color = as.character(zip_code))) +
    geom_point(size = 3, alpha = 1) +
    labs(
      x = "",
      y = "",
      colour = "zipcode",
      title = paste("2017 CRIME DATA FOR ", toupper(input$category), " IN ", zip_string)
    )
  g1
})

</script>
 <!--html_preserve-->
<script type="application/shiny-prerendered" data-context="dependencies">
{"type":"list","attributes":{},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["jquery"]},{"type":"character","attributes":{},"value":["1.11.3"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmd/h/jquery-1.11.3"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["jquery.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["rmarkdown"]},{"type":"logical","attributes":{},"value":[true]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["bootstrap"]},{"type":"character","attributes":{},"value":["3.3.5"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmd/h/bootstrap-3.3.5"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["viewport"]}},"value":[{"type":"character","attributes":{},"value":["width=device-width, initial-scale=1"]}]},{"type":"character","attributes":{},"value":["js/bootstrap.min.js","shim/html5shiv.min.js","shim/respond.min.js"]},{"type":"character","attributes":{},"value":["css/bootstrap.min.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["rmarkdown"]},{"type":"logical","attributes":{},"value":[true]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["pagedtable"]},{"type":"character","attributes":{},"value":["1.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmd/h/pagedtable-1.1"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["js/pagedtable.js"]},{"type":"character","attributes":{},"value":["css/pagedtable.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["rmarkdown"]},{"type":"logical","attributes":{},"value":[true]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["jquery"]},{"type":"character","attributes":{},"value":["1.11.3"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmd/h/jquery-1.11.3"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["jquery.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["rmarkdown"]},{"type":"logical","attributes":{},"value":[true]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["navigation"]},{"type":"character","attributes":{},"value":["1.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmd/h/navigation-1.1"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["tabsets.js","codefolding.js","sourceembed.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["rmarkdown"]},{"type":"logical","attributes":{},"value":[true]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["highlightjs"]},{"type":"character","attributes":{},"value":["9.12.0"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmd/h/highlightjs"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["highlight.js"]},{"type":"character","attributes":{},"value":["textmate.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["rmarkdown"]},{"type":"logical","attributes":{},"value":[true]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["selectize"]},{"type":"character","attributes":{},"value":["0.11.2"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["href"]}},"value":[{"type":"character","attributes":{},"value":["shared/selectize"]}]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["css/selectize.bootstrap3.css"]},{"type":"character","attributes":{},"value":["<!--[if lt IE 9]>\n<script src=\"shared/selectize/js/es5-shim.min.js\"><\/script>\n<![endif]-->\n<script src=\"shared/selectize/js/selectize.min.js\"><\/script>"]},{"type":"NULL"},{"type":"NULL"},{"type":"logical","attributes":{},"value":[true]}]}]}
</script>
<!--/html_preserve-->

<div id="rmd-source-code">LS0tCnRpdGxlOiAiYXVzdGluIGNyaW1lIGludGVyYWN0aXZlIgphdXRob3I6ICJAbm50cm4iCmRhdGU6ICIxMS82LzIwMTgiCm91dHB1dDogCiAgaHRtbF9ub3RlYm9vazogCiAgICBjb2RlX2ZvbGRpbmc6IGhpZGUKICAgIHRvYzogeWVzCnJ1bnRpbWU6IHNoaW55X3ByZXJlbmRlcmVkCi0tLQoKYGBge3IsIGNvbnRleHQ9InNldHVwIiwgaW5jbHVkZT1GQUxTRX0KCmtuaXRyOjpvcHRzX2NodW5rJHNldChlY2hvID0gVFJVRSkKCmxpYnJhcnkodGlkeXZlcnNlKQoKbXlfdGhlbWUgPC0gdGhlbWVfbWluaW1hbCgpICsKICB0aGVtZSgKICAgIGF4aXMudGV4dC54ID0gZWxlbWVudF90ZXh0KGNvbG91ciA9ICJncmV5MjAiLCBzaXplID0gMTMsIGZhY2UgPSAiYm9sZCIpLAogICAgYXhpcy50ZXh0LnkgPSBlbGVtZW50X3RleHQoY29sb3VyID0gImdyZXkyMCIsIHNpemUgPSAxMywgZmFjZSA9ICJib2xkIiksCiAgIGxlZ2VuZC5wb3NpdGlvbj0iYm90dG9tIiwgbGVnZW5kLmJveCA9ICJob3Jpem9udGFsIgogICkKCnRoZW1lX3NldChteV90aGVtZSkKCgpwIDwtIHJlYWRfY3N2KCIvVXNlcnMvYW5uaWUvcHJvZ3JhbW1pbmctbm90ZXMvUi9hdXN0aW4tY3JpbWUvb3V0cHV0L3AuY3N2IikKcCRtb250aCA8LSBvcmRlcmVkKHAkbW9udGgsIHRvdXBwZXIobW9udGguYWJiKSkKCnAyIDwtIHAgJT4lCiAgICBmaWx0ZXIoc3RyZWV0X25hbWUgIT0gIlVOS05PV04iKSAlPiUKICAgIGdyb3VwX2J5KGhpZ2hlc3Rfb2ZmZW5zZV9kZXNjcmlwdGlvbiwgc3RyZWV0X25hbWUpICU+JQogICAgc3VtbWFyaXNlKG4gPSBuKCksIHMgPSBzdW0odmFsdWUpKSAlPiUKICAgIGFycmFuZ2UoZGVzYyhuKSkKCgpwX2xpc3QgPC0gcDIgJT4lCiAgICBncm91cF9ieShoaWdoZXN0X29mZmVuc2VfZGVzY3JpcHRpb24pICU+JQogICAgc3VtbWFyaXNlKG4gPSBuKCkpICU+JQogICAgYXJyYW5nZShkZXNjKG4pKSAKCnppcCA8LSBwJT4lCiAgICBncm91cF9ieSh6aXBfY29kZSkgJT4lCiAgICBzdW1tYXJpc2UobiA9IG4oKSkgJT4lCiAgICBuYS5vbWl0KCkgJT4lCiAgICBhcnJhbmdlKGRlc2MobikpCmBgYAoKCgpgYGB7ciwgY29udGV4dD0icmVuZGVyIiwgZWNobz1GQUxTRX0KCgogIHNlbGVjdElucHV0KCJ6aXBjb2RlIiwgbGFiZWwgPSAic2VsZWN0IHppcCIsIG11bHRpcGxlID0gVFJVRSwKICAgICAgICAgICAgICBjaG9pY2VzID0gemlwJHppcF9jb2RlLCBzZWxlY3RlZCA9ICI3ODc1NyIpCiAgCiAgIHJhZGlvQnV0dG9ucygiY2F0ZWdvcnkiLCBsYWJlbCA9ICJzZWxlY3Qgb2ZmZW5zZSBjYXRlZ29yeSIsIGlubGluZSA9IFRSVUUsCiAgICAgICAgICAgICAgY2hvaWNlcyA9IG5hLm9taXQodW5pcXVlKHAkY2F0ZWdvcnlfZGVzY3JpcHRpb24pKSkKICAKcGxvdE91dHB1dCgiZGlzdFBsb3QiKQpgYGAKCgpgYGB7ciwgY29udGV4dD0ic2VydmVyIn0KCm91dHB1dCRkaXN0UGxvdCA8LSByZW5kZXJQbG90KHsKICB6aXBfc3RyaW5nIDwtIGdzdWIoIiwgIiwgIiBBTkQgIiwgdG9TdHJpbmcoaW5wdXQkemlwY29kZSkpCgogIGcxIDwtIHAgJT4lCiAgICBmaWx0ZXIoCiAgICAgIHppcF9jb2RlID09IGlucHV0JHppcGNvZGUsCiAgICAgIGNhdGVnb3J5X2Rlc2NyaXB0aW9uID09IGlucHV0JGNhdGVnb3J5CiAgICApICU+JQogICAgZ3JvdXBfYnkoemlwX2NvZGUsIG1vbnRoKSAlPiUKICAgIHN1bW1hcmlzZShuID0gbigpLCBzID0gc3VtKHZhbHVlKSkgJT4lCiAgICBnZ3Bsb3QoYWVzKG1vbnRoLCBzLCBjb2xvciA9IGFzLmNoYXJhY3Rlcih6aXBfY29kZSkpKSArCiAgICBnZW9tX3BvaW50KHNpemUgPSAzLCBhbHBoYSA9IDEpICsKICAgIGxhYnMoCiAgICAgIHggPSAiIiwKICAgICAgeSA9ICIiLAogICAgICBjb2xvdXIgPSAiemlwY29kZSIsCiAgICAgIHRpdGxlID0gcGFzdGUoIjIwMTcgQ1JJTUUgREFUQSBGT1IgIiwgdG91cHBlcihpbnB1dCRjYXRlZ29yeSksICIgSU4gIiwgemlwX3N0cmluZykKICAgICkKICBnMQp9KQoKYGBgCgo=</div>



</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});

$(document).ready(function () {
  $('.knitsql-table').addClass('kable-table');
  var container = $('.kable-table');
  container.each(function() {

    // move the caption out of the table
    var table = $(this).children('table');
    var caption = table.children('caption').detach();
    caption.insertBefore($(this)).css('display', 'inherit');
  });
});

</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
